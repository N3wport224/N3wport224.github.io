<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Financial Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module">
        import {
            initializeApp
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import {
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc,
            collection,
            onSnapshot,
            query,
            addDoc,
            deleteDoc
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, auth, db, userId;
        let incomeChart, expenseChart, netWorthChart;
        let state = {
            income: [],
            expenses: [],
            debts: [],
            assets: 0
        };

        // --- Firebase Initialization and Authentication ---
        const initFirebase = async () => {
            if (!firebaseConfig) {
                console.error("Firebase config is missing. Cannot initialize Firebase.");
                return;
            }

            try {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                const authStatePromise = new Promise((resolve) => {
                    const unsubscribe = onAuthStateChanged(auth, async (user) => {
                        if (user) {
                            userId = user.uid;
                            document.getElementById('user-id-display').textContent = `User ID: ${userId}`;
                            console.log("User signed in with UID:", userId);
                            subscribeToData();
                            resolve();
                        } else {
                            userId = null;
                            console.log("No user signed in.");
                            resolve();
                        }
                        unsubscribe();
                    });
                });

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                await authStatePromise;
            } catch (error) {
                console.error("Firebase init or auth error:", error);
            }
        };

        const getBasePaths = () => {
            if (!userId) {
                console.error("User not authenticated.");
                return null;
            }
            return {
                userDocPath: `artifacts/${appId}/users/${userId}`,
                incomeCol: `artifacts/${appId}/users/${userId}/income`,
                expenseCol: `artifacts/${appId}/users/${userId}/expenses`,
                debtCol: `artifacts/${appId}/users/${userId}/debts`,
            };
        };

        const subscribeToData = () => {
            if (!userId) {
                console.error("Cannot subscribe, userId is not set.");
                return;
            }
            const paths = getBasePaths();
            onSnapshot(collection(db, paths.incomeCol), (snapshot) => {
                state.income = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                updateUI();
            });
            onSnapshot(collection(db, paths.expenseCol), (snapshot) => {
                state.expenses = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                updateUI();
            });
            onSnapshot(collection(db, paths.debtCol), (snapshot) => {
                state.debts = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                updateUI();
            });
        };

        // --- Application State and Data Management ---
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            }).format(amount);
        };

        const calculateSummary = () => {
            const totalIncome = state.income.reduce((sum, item) => sum + item.amount, 0);
            const totalExpenses = state.expenses.reduce((sum, item) => sum + item.amount, 0);
            const totalDebt = state.debts.reduce((sum, item) => item.balance > 0 ? sum + item.balance : sum, 0);
            const minimumPayments = state.debts.reduce((sum, debt) => debt.minPayment > 0 ? sum + debt.minPayment : sum, 0);
            const disposableIncome = totalIncome - totalExpenses - minimumPayments;
            const netWorth = state.assets - totalDebt;

            return {
                totalIncome,
                totalExpenses,
                totalDebt,
                disposableIncome,
                netWorth
            };
        };

        const renderUI = () => {
            const summary = calculateSummary();
            // Render summary section
            document.getElementById('total-income').textContent = formatCurrency(summary.totalIncome);
            document.getElementById('total-expenses').textContent = formatCurrency(summary.totalExpenses);
            document.getElementById('total-debt').textContent = formatCurrency(summary.totalDebt);
            document.getElementById('net-worth').textContent = formatCurrency(summary.netWorth);

            // Render transactions
            renderList('income', state.income, 'income-list');
            renderList('expense', state.expenses, 'expense-list');
            renderDebtList(state.debts);
            
            // Update charts
            updateCharts(summary);
        };

        const renderList = (type, data, elementId) => {
            const list = document.getElementById(elementId);
            list.innerHTML = '';
            data.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'flex justify-between items-center p-3 rounded-lg bg-gray-100';
                itemEl.innerHTML = `
                    <div class="flex-grow">
                        <p class="font-semibold">${item.description}</p>
                        <p class="text-sm text-gray-500">${new Date(item.date).toLocaleDateString()}</p>
                        ${item.recurring ? '<p class="text-xs text-accent">Recurring</p>' : ''}
                    </div>
                    <span class="font-bold ${type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${formatCurrency(item.amount)}
                    </span>
                    <button onclick="removeItem('${type}', '${item.id}')" class="ml-2 text-red-500 hover:text-red-700 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                list.appendChild(itemEl);
            });
        };

        const renderDebtList = (data) => {
            const list = document.getElementById('debt-list');
            list.innerHTML = '';
            data.forEach(debt => {
                const debtEl = document.createElement('div');
                const progress = ((debt.originalBalance - debt.balance) / debt.originalBalance) * 100;
                debtEl.className = 'p-4 rounded-lg bg-gray-100 shadow-sm';
                debtEl.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-primary">${debt.name}</h3>
                        <button onclick="removeDebt('${debt.id}')" class="text-red-500 hover:text-red-700 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                    <div class="w-full bg-gray-300 rounded-full h-2.5 mb-2">
                        <div class="bg-primary h-2.5 rounded-full" style="width: ${progress.toFixed(2)}%"></div>
                    </div>
                    <p class="text-sm">Balance: <span class="font-bold">${formatCurrency(debt.balance)}</span></p>
                    <p class="text-sm">Interest Rate: <span class="font-bold">${debt.interestRate}%</span></p>
                    <p class="text-sm">Minimum Payment: <span class="font-bold">${formatCurrency(debt.minPayment)}</span></p>
                    <p class="text-sm">Due Date: <span class="font-bold">${new Date(debt.dueDate).toLocaleDateString()}</span></p>
                    
                    <div class="mt-4 pt-2 border-t border-gray-200 flex flex-col sm:flex-row gap-2">
                        <input type="number" placeholder="Add Interest ($)" id="interest-${debt.id}" class="flex-grow p-2 rounded-lg border border-gray-300 text-sm">
                        <input type="number" placeholder="Make Payment ($)" id="payment-${debt.id}" class="flex-grow p-2 rounded-lg border border-gray-300 text-sm">
                        <button onclick="updateDebt('${debt.id}')" class="bg-gray-300 text-gray-700 p-2 rounded-lg text-sm font-semibold hover:bg-gray-400 transition-colors">Update</button>
                    </div>
                `;
                list.appendChild(debtEl);
            });
        };

        const updateCharts = (summary) => {
            const monthlyData = calculateMonthlyData();
            const monthlyLabels = Object.keys(monthlyData);
            const monthlyNetWorth = monthlyLabels.map(month => monthlyData[month].netWorth);

            const incomeData = monthlyLabels.map(month => monthlyData[month].income);
            const expenseData = monthlyLabels.map(month => monthlyData[month].expenses);

            if (incomeChart) incomeChart.destroy();
            if (netWorthChart) netWorthChart.destroy();
            
            const incomeExpenseCtx = document.getElementById('incomeExpenseChart').getContext('2d');
            incomeChart = new Chart(incomeExpenseCtx, {
                type: 'bar',
                data: {
                    labels: monthlyLabels,
                    datasets: [{
                        label: 'Income',
                        data: incomeData,
                        backgroundColor: '#10b981',
                    }, {
                        label: 'Expenses',
                        data: expenseData,
                        backgroundColor: '#ef4444',
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            const netWorthCtx = document.getElementById('netWorthChart').getContext('2d');
            netWorthChart = new Chart(netWorthCtx, {
                type: 'line',
                data: {
                    labels: monthlyLabels,
                    datasets: [{
                        label: 'Net Worth',
                        data: monthlyNetWorth,
                        borderColor: '#1d4ed8',
                        backgroundColor: 'rgba(29, 78, 216, 0.2)',
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        };

        const calculateMonthlyData = () => {
            const data = {};
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            const twoYearsAgo = new Date(currentYear - 2, currentMonth, today.getDate());

            const allTransactions = [...state.income.map(t => ({...t, type: 'income'})), ...state.expenses.map(t => ({...t, type: 'expense'}))];
            
            allTransactions.forEach(t => {
                const date = new Date(t.date);
                if (date < twoYearsAgo) return;

                const monthYear = `${date.getMonth() + 1}/${date.getFullYear()}`;
                if (!data[monthYear]) {
                    data[monthYear] = { income: 0, expenses: 0, netWorth: 0 };
                }

                if (t.type === 'income') {
                    data[monthYear].income += t.amount;
                } else {
                    data[monthYear].expenses += t.amount;
                }
            });
            
            let cumulativeNetWorth = 0;
            const sortedMonths = Object.keys(data).sort((a,b) => {
                const [monthA, yearA] = a.split('/').map(Number);
                const [monthB, yearB] = b.split('/').map(Number);
                return (yearA * 12 + monthA) - (yearB * 12 + monthB);
            });
            
            sortedMonths.forEach(month => {
                const monthlyChange = data[month].income - data[month].expenses;
                cumulativeNetWorth += monthlyChange;
                data[month].netWorth = cumulativeNetWorth;
            });
            return data;
        };

        const updateUI = () => {
            if (userId) {
                renderUI();
            }
        };

        // --- Firebase Interaction (CRUD) ---
        const addItem = async (type) => {
            if (!userId) {
                alert("Please wait for authentication to complete.");
                return;
            }
            const paths = getBasePaths();
            const descriptionInput = document.getElementById(`${type}-description`);
            const amountInput = document.getElementById(`${type}-amount`);
            const isRecurring = document.getElementById(`${type}-recurring`).checked;
            const description = descriptionInput.value.trim();
            const amount = parseFloat(amountInput.value);
            
            if (description && amount > 0) {
                const newItem = {
                    description: description,
                    amount: amount,
                    date: new Date().toISOString(),
                    recurring: isRecurring
                };
                try {
                    await addDoc(collection(db, type === 'income' ? paths.incomeCol : paths.expenseCol), newItem);
                    descriptionInput.value = '';
                    amountInput.value = '';
                    document.getElementById(`${type}-recurring`).checked = false;
                } catch (e) {
                    console.error("Error adding document: ", e);
                }
            } else {
                alert('Please enter a valid description and amount.');
            }
        };

        const removeItem = async (type, docId) => {
            if (!userId) {
                alert("Please wait for authentication to complete.");
                return;
            }
            const paths = getBasePaths();
            try {
                await deleteDoc(doc(db, type === 'income' ? paths.incomeCol : paths.expenseCol, docId));
            } catch (e) {
                console.error("Error removing document: ", e);
            }
        };

        const addDebt = async () => {
            if (!userId) {
                alert("Please wait for authentication to complete.");
                return;
            }
            const paths = getBasePaths();
            const name = document.getElementById('debt-name').value.trim();
            const balance = parseFloat(document.getElementById('debt-balance').value);
            const interest = parseFloat(document.getElementById('debt-interest').value);
            const minPayment = parseFloat(document.getElementById('debt-min-payment').value);
            const dueDate = document.getElementById('debt-due-date').value;
            
            if (name && balance > 0 && interest >= 0 && minPayment > 0 && dueDate) {
                const newDebt = {
                    name: name,
                    balance: balance,
                    interestRate: interest,
                    minPayment: minPayment,
                    dueDate: dueDate,
                    originalBalance: balance
                };
                try {
                    await addDoc(collection(db, paths.debtCol), newDebt);
                    document.getElementById('debt-name').value = '';
                    document.getElementById('debt-balance').value = '';
                    document.getElementById('debt-interest').value = '';
                    document.getElementById('debt-min-payment').value = '';
                    document.getElementById('debt-due-date').value = '';
                } catch (e) {
                    console.error("Error adding debt: ", e);
                }
            } else {
                alert('Please fill out all debt fields correctly.');
            }
        };

        const removeDebt = async (docId) => {
            if (!userId) {
                alert("Please wait for authentication to complete.");
                return;
            }
            const paths = getBasePaths();
            try {
                await deleteDoc(doc(db, paths.debtCol, docId));
            } catch (e) {
                console.error("Error removing debt: ", e);
            }
        };
        
        const updateDebt = async (docId) => {
            if (!userId) {
                alert("Please wait for authentication to complete.");
                return;
            }
            const paths = getBasePaths();
            const interestInput = document.getElementById(`interest-${docId}`);
            const paymentInput = document.getElementById(`payment-${docId}`);
            
            const interest = parseFloat(interestInput.value) || 0;
            const payment = parseFloat(paymentInput.value) || 0;
            
            if (interest > 0 || payment > 0) {
                const debtRef = doc(db, paths.debtCol, docId);
                const debtSnap = await getDoc(debtRef);
                if (debtSnap.exists()) {
                    const currentBalance = debtSnap.data().balance;
                    const newBalance = currentBalance + interest - payment;
                    await setDoc(debtRef, { balance: newBalance }, { merge: true });
                    interestInput.value = '';
                    paymentInput.value = '';
                }
            }
        };

        const calculatePayoff = () => {
            const strategy = document.getElementById('payoff-strategy').value;
            const extraPayment = parseFloat(document.getElementById('extra-payment').value) || 0;
            const resultsEl = document.getElementById('payoff-results');

            if (state.debts.length === 0) {
                resultsEl.innerHTML = '<p class="text-center text-red-500">Please add at least one debt to calculate.</p>';
                resultsEl.classList.remove('hidden');
                return;
            }

            const debtsToPay = JSON.parse(JSON.stringify(state.debts)); // Deep copy
            if (strategy === 'avalanche') {
                debtsToPay.sort((a, b) => b.interestRate - a.interestRate);
            } else {
                debtsToPay.sort((a, b) => a.balance - b.balance);
            }

            let totalMonths = 0;
            let totalInterestPaid = 0;
            let monthlyPayments = state.debts.reduce((sum, debt) => sum + debt.minPayment, 0);
            let extraMonthlyPayment = extraPayment;

            while (debtsToPay.some(d => d.balance > 0)) {
                totalMonths++;
                let totalAvailableForPayment = monthlyPayments + extraMonthlyPayment;
                
                for (const debt of debtsToPay) {
                    if (debt.balance <= 0) continue;

                    let interestForMonth = (debt.balance * (debt.interestRate / 100)) / 12;
                    totalInterestPaid += interestForMonth;
                    debt.balance += interestForMonth;

                    let payment = 0;
                    if (totalAvailableForPayment >= debt.minPayment) {
                        payment = debt.minPayment;
                        totalAvailableForPayment -= payment;
                    } else {
                        payment = totalAvailableForPayment;
                        totalAvailableForPayment = 0;
                    }

                    if (totalAvailableForPayment > 0) {
                        const amountToPayoff = Math.min(totalAvailableForPayment, debt.balance);
                        payment += amountToPayoff;
                        totalAvailableForPayment -= amountToPayoff;
                    }

                    if (debt.balance > payment) {
                        debt.balance -= payment;
                    } else {
                        const previousMinPayment = debt.minPayment;
                        debt.balance = 0;
                        monthlyPayments -= previousMinPayment;
                        extraMonthlyPayment += previousMinPayment;
                    }

                    if (totalAvailableForPayment <= 0) break;
                }
                
                if (totalMonths > 1200) break; // Safety break for infinite loops
            }
            
            resultsEl.innerHTML = `
                <p class="font-bold text-center text-primary mb-2">Payoff Results</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
                    <div class="p-4 bg-white rounded-lg shadow-inner">
                        <p class="font-semibold text-lg">${totalMonths} Months</p>
                        <p class="text-sm">Time to Payoff</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow-inner">
                        <p class="font-semibold text-lg">${formatCurrency(totalInterestPaid)}</p>
                        <p class="text-sm">Total Interest Paid</p>
                    </div>
                </div>
            `;
            resultsEl.classList.remove('hidden');
        };


        // Expose functions to the global scope for event handlers
        window.addItem = addItem;
        window.removeItem = removeItem;
        window.addDebt = addDebt;
        window.removeDebt = removeDebt;
        window.updateDebt = updateDebt;
        window.calculatePayoff = calculatePayoff;

        // Initial setup
        document.addEventListener('DOMContentLoaded', initFirebase);
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        ::-webkit-scrollbar {
            display: none;
        }
        
        .scrollable-list {
            max-height: 250px;
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-background text-secondary p-4 sm:p-8">
    <div class="max-w-6xl mx-auto space-y-8">
        <!-- Header and Summary Section -->
        <header class="bg-card p-6 rounded-xl shadow-md">
            <h1 class="text-3xl font-bold text-primary text-center mb-2">Advanced Financial Tracker</h1>
            <p class="text-center text-sm mb-4">Your personal dashboard for managing income, expenses, and debt.</p>
            <p id="user-id-display" class="text-xs text-center text-gray-400"></p>

            <div id="summary" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-center mt-4">
                <div class="bg-primary text-white p-4 rounded-lg shadow-inner">
                    <p class="text-xl font-bold" id="total-income">$0.00</p>
                    <p class="text-sm">Total Income</p>
                </div>
                <div class="bg-red-500 text-white p-4 rounded-lg shadow-inner">
                    <p class="text-xl font-bold" id="total-expenses">$0.00</p>
                    <p class="text-sm">Total Expenses</p>
                </div>
                <div class="bg-secondary text-white p-4 rounded-lg shadow-inner">
                    <p class="text-xl font-bold" id="total-debt">$0.00</p>
                    <p class="text-sm">Total Debt</p>
                </div>
                <div class="bg-green-500 text-white p-4 rounded-lg shadow-inner">
                    <p class="text-xl font-bold" id="net-worth">$0.00</p>
                    <p class="text-sm">Net Worth</p>
                </div>
            </div>
        </header>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Data Visualization Section -->
            <section class="bg-card p-6 rounded-xl shadow-md lg:col-span-2">
                <h2 class="text-2xl font-semibold text-primary mb-4">Financial Overview</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Net Worth Over Time</h3>
                        <canvas id="netWorthChart"></canvas>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Monthly Income vs. Expenses</h3>
                        <canvas id="incomeExpenseChart"></canvas>
                    </div>
                </div>
            </section>
        
            <!-- Income and Expenses Section -->
            <section class="lg:col-span-1 space-y-6">
                <!-- Income Card -->
                <div class="bg-card p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold text-primary mb-4">Income</h2>
                    <div class="flex flex-col gap-2 mb-4">
                        <input type="text" id="income-description" placeholder="Description (e.g., Paycheck)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                        <input type="number" id="income-amount" placeholder="Amount" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="income-recurring" class="text-primary rounded focus:ring-primary">
                            <label for="income-recurring" class="text-sm">Recurring</label>
                        </div>
                        <button onclick="addItem('income')" class="bg-primary text-white p-2 rounded-lg font-bold hover:bg-blue-700 transition-colors">Add Income</button>
                    </div>
                    <div id="income-list" class="scrollable-list space-y-2"></div>
                </div>

                <!-- Expenses Card -->
                <div class="bg-card p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold text-primary mb-4">Expenses</h2>
                    <div class="flex flex-col gap-2 mb-4">
                        <input type="text" id="expense-description" placeholder="Description (e.g., Rent)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                        <input type="number" id="expense-amount" placeholder="Amount" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="expense-recurring" class="text-primary rounded focus:ring-primary">
                            <label for="expense-recurring" class="text-sm">Recurring</label>
                        </div>
                        <button onclick="addItem('expense')" class="bg-red-500 text-white p-2 rounded-lg font-bold hover:bg-red-700 transition-colors">Add Expense</button>
                    </div>
                    <div id="expense-list" class="scrollable-list space-y-2"></div>
                </div>
            </section>
        </div>

        <!-- Debt Management Section -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Add Debt Card -->
            <div class="bg-card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold text-primary mb-4">Add Debt</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="debt-name" placeholder="Credit Card / Loan Name" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary col-span-2">
                    <input type="number" id="debt-balance" placeholder="Current Balance ($)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                    <input type="number" id="debt-interest" placeholder="Interest Rate (%)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                    <input type="number" id="debt-min-payment" placeholder="Minimum Payment ($)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                    <input type="date" id="debt-due-date" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary">
                    <button onclick="addDebt()" class="bg-primary text-white p-2 rounded-lg font-bold hover:bg-blue-700 transition-colors col-span-2">Add Debt</button>
                </div>
            </div>

            <!-- Debt Payoff Calculator & List -->
            <div class="bg-card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold text-primary mb-4">Debt List</h2>
                <div id="debt-list" class="scrollable-list space-y-4"></div>

                <div class="mt-6 border-t border-gray-200 pt-6">
                    <h3 class="text-xl font-semibold mb-3">Debt Payoff Strategy</h3>
                    <div class="flex flex-col sm:flex-row gap-4 mb-4">
                        <select id="payoff-strategy" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary flex-grow">
                            <option value="avalanche">Debt Avalanche (Highest Interest First)</option>
                            <option value="snowball">Debt Snowball (Smallest Balance First)</option>
                        </select>
                        <input type="number" id="extra-payment" placeholder="Extra Payment ($)" class="p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary w-full sm:w-36">
                    </div>
                    <button onclick="calculatePayoff()" class="bg-accent text-white p-2 rounded-lg font-bold hover:bg-yellow-600 transition-colors w-full">Calculate Payoff</button>
                    <div id="payoff-results" class="mt-4 p-4 bg-gray-100 rounded-lg hidden"></div>
                </div>
            </div>
        </section>
    </div>
</body>

</html>
